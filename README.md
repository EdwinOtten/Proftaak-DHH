Proftaak-DHH
=============

Proftaak: uitbreiden van De Hartige Hap

Download de Spring tools Development tool op: http://spring.io/tools


Installlatie
============
<div><div> <ul> <li>De applicatie maakt gebruik van een MySQL database met de naam "hh". </li><li>De database moet aanwezig zijn om de applicatie te laten werken, maar tabellen hoeven niet handmatig te worden aangemaakt. Dat doet Hibernate voor je. </li><li>Mocht je een eerdere versie van de Hartige Hap webapplicatie geïnstalleerd hebben gehad, dan de oude database volledig weggooien en een nieuwe, lege database creëren, aangezien de tabellenstructuur anders is.&nbsp; </li><li>In het bestand src/main/resources/datasource-jpa-tx.xml staat de configuratie om de database te benaderen, die je indien nodig kunt aanpassen, met name: username, password en URL.&nbsp; </li><li>In het bestand datasource-jpa-tx.xml staat de property &lt;prop key="hibernate.hbm2ddl.auto"&gt;create&lt;/prop&gt;. Met deze property worden de tabellen telkens weggegooid en opnieuw gecreëerd, als de applicatie wordt gedeployed. Als je dit niet wilt, verwijder dan deze property uit het bestand. Is echter heel handig tijdens development. </li><li>In het tips &amp; tricks document staat hoe je een bestaande applicatie importeert in STS. STS is de Spring ontwikkelomgeving. </li><li>Deze applicatie maakt gebruik van Lombok. Hiervoor moet STS worden aangepast, anders begrijpt STS de broncode niet en geeft foutieve foutmeldingen. Om dit te doen, (1) download lombok.jar van&nbsp;<a onclick="this.href='/webapps/portal/frameset.jsp?tab_group=courses&amp;url=%2Fwebapps%2Fblackboard%2Fcontent%2FcontentWrapper.jsp%3Fcontent_id%3D_4955099_1%26displayName%3DGekoppeld%2Bbestand%26course_id%3D_66160_1%26navItem%3Dcontent%26attachment%3Dtrue%26href%3Dhttp%253A%252F%252Fprojectlombok.org%252F';" href="http://projectlombok.org/" rel="nofollow">http://projectlombok.org/</a>, (2) dubbelklik op lombok.jar, (3) bevestig dat STS aangepast mag worden door Lombok. </li><li>In STS, Ga menu "Run"/"Run Configurations...". Ga naar tabblad "Arguments" en zet bij "VM Arguments" de opties "-Xmx1024m -Xss192k -XX:MaxPermSize=256m -Dinsight-max-frames=6000" (zonder de quotes) erbij. Met het vergroten van de heap size en perm heap size naar de gegeven waarden voorkom je de foutmelding&nbsp;"java.lang.ClassNotFoundException: org.springframework.web.context.ConfigurableWebEnvironment". Met het vergroten van&nbsp;insight-max-frames naar 6000 voorkom je mogelijk de foutmelding "Imbalanced frame stack! (exit() called too many times)". Echter deze foutmelding wijst meestal op een fout in het JPA-deel van de applicatie! </li><li>Als je een langzame computer hebt, is 120 seconden soms niet genoeg voor het bouwen en deployen van de applicatie. Als je het dan nogmaals probeert, lukt het wel, maar toch irritant. Je kunt de timeout van 120 seconden groter zetten door: in STS, dubbelklik op "VMware vFabric tc Server ..." die je vindt in de "Servers" tab linksonder. Er komt dan een schermpje op waarbij er een "Timouts" tab is. Als je Start (in seconds) op 240 zet, ben je van het probleem af. Zo niet, dan wordt het echt tijd voor een nieuwe computer. </li></ul> <span style="text-decoration: underline;"><strong></strong></span></div> <div></div> 
Gebruik
============
<div> <ul> <li>deploy de applicatie: </li><li style="list-style: none;"> <ul> <li>rechter muisklik op project, "run as", "run on server" </li><li>check de console log op excepties </li><li>STS start automatisch een web browser op binnen STS </li><li>andere browser? Gebruik:&nbsp;http://localhost:8080/hh/ </li></ul>  </li><li>log in met gebruikersnaam "employee" en password "employee" </li><li>klik op het restaurant naar keuze </li><li style="list-style: none;"> <ul> <li>subsysteem bestelling: kies een tafel naar keuze, kies je gerechten, doe een of meer bestellingen, vraag om afrekenen </li><li>subsysteem keuken: plan bestelling, meld bestelling gereed </li><li>subsysteem bediening: meld bestelling geserveerd, meld rekening betaald </li><li>klanten subsysteem: CRUD op klanten </li></ul>  </li><li>geïmplementeerde business rules: </li><li style="list-style: none;"> <ul> <li>een lege bestelling kan niet gedaan worden </li><li>een lege rekening kan niet afgerekend worden </li><li>een rekening met nog niet bestelde bestelling mag niet afgerekend worden </li></ul>  </li><li>autorisatie en personalisatie: </li><li style="list-style: none;"> <ul> <li>er is ook een gebruiker "customer" met password "customer". Deze gebruiker heeft minder rechten </li><li>als je in het geheel niet bent ingelogd, mag je wel alles zien, maar mag je geen acties ondernemen </li></ul>  </li></ul> </div> <div></div> 
Ontwikkelstraat
============
<div> <ul> <li>De Hartige Hap applicatie van de docenten staat in een ontwikkelstraat </li><li>Via&nbsp;<a onclick="this.href='/webapps/portal/frameset.jsp?tab_group=courses&amp;url=%2Fwebapps%2Fblackboard%2Fcontent%2FcontentWrapper.jsp%3Fcontent_id%3D_4955099_1%26displayName%3DGekoppeld%2Bbestand%26course_id%3D_66160_1%26navItem%3Dcontent%26attachment%3Dtrue%26href%3Dhttp%253A%252F%252F145.48.6.147%253A8081%252F';" href="http://145.48.6.147:8081/" rel="nofollow">http://145.48.6.147:8081/</a>&nbsp;kun je de Jenkins build server benaderen </li><li>Via&nbsp;<a onclick="this.href='/webapps/portal/frameset.jsp?tab_group=courses&amp;url=%2Fwebapps%2Fblackboard%2Fcontent%2FcontentWrapper.jsp%3Fcontent_id%3D_4955099_1%26displayName%3DGekoppeld%2Bbestand%26course_id%3D_66160_1%26navItem%3Dcontent%26attachment%3Dtrue%26href%3Dhttp%253A%252F%252F145.48.6.147%253A9000%252F';" href="/webapps/portal/frameset.jsp?tab_group=courses&amp;url=%2Fwebapps%2Fblackboard%2Fcontent%2FcontentWrapper.jsp%3Fcontent_id%3D_4955099_1%26displayName%3DGekoppeld%2Bbestand%26course_id%3D_66160_1%26navItem%3Dcontent%26attachment%3Dtrue%26href%3Dhttp%253A%252F%252F145.48.6.147%253A9000%252F" rel="nofollow">http://145.48.6.147:9000/</a>&nbsp;kun je Sonar code analyse bekijken </li><li>In <a href="https://bb.avans.nl/bbcswebdav/pid-4955099-dt-content-rid-9028473_2/xid-9028473_2" target="_blank" rel="nofollow">dit</a> documentje staat hoe je je eigen Hartige Hap webapplicatie in de ontwikkelstraat kunt hangen </li></ul> </div> </div>
